{
  "metadata": {
    "summary": "Count of net new housing units from completed building permits.",
    "definition": "Tracks net new housing units that have been certified for occupancy through building permits. Each record represents when new units were approved for occupancy via Initial TCO, Amended TCO, or Certificate of Final Completion (CFC).",
    "data_sf_url": "https://data.sfgov.org/Housing-and-Buildings/Dwelling-Unit-Completion-Counts-by-Building-Permit/j67f-aayr",
    "ytd_query": "SELECT date_trunc_ym(date_issued) as date, SUM(number_of_units_certified) as value WHERE date_issued >= last_year_start AND date_issued < current_date GROUP BY date ORDER BY date",
    "metric_query": "SELECT '\ud83c\udfd7\ufe0f\ud83c\udfe0 New Housing Units' as label, max(date_issued) as max_date, SUM(CASE WHEN date_issued >= this_year_start AND date_issued < this_year_end THEN number_of_units_certified END) as this_year, SUM(CASE WHEN date_issued >= last_year_start AND date_issued < last_year_end THEN number_of_units_certified END) as last_year, (SUM(CASE WHEN date_issued >= this_year_start AND date_issued < this_year_end THEN number_of_units_certified END) - SUM(CASE WHEN date_issued >= last_year_start AND date_issued < last_year_end THEN number_of_units_certified END)) as delta, ((SUM(CASE WHEN date_issued >= this_year_start AND date_issued < this_year_end THEN number_of_units_certified END) - SUM(CASE WHEN date_issued >= last_year_start AND date_issued < last_year_end THEN number_of_units_certified END)) * 100.0 / NULLIF(SUM(CASE WHEN date_issued >= last_year_start AND date_issued < last_year_end THEN number_of_units_certified END), 0)) as perc_diff"
  },
  "ytd_result": {
    "query": "SELECT date_trunc_ym(date_issued) as date, SUM(number_of_units_certified) as value WHERE date_issued >= '2024-01-01' AND date_issued < '2025-01-30' GROUP BY date ORDER BY date",
    "error": null,
    "url": "https://data.sfgov.org/resource/j67f-aayr.json?%24query=SELECT+date_trunc_ym%28date_issued%29+as+date%2C+SUM%28number_of_units_certified%29+as+value+WHERE+date_issued+%3E%3D+%272024-01-01%27+AND+date_issued+%3C+%272025-01-30%27+GROUP+BY+date+ORDER+BY+date+LIMIT+5000+OFFSET+0",
    "data": "[{\"label\":\"\\ud83c\\udfd7\\ufe0f\\ud83c\\udfe0 New Housing Units\",\"max_date\":\"2025-01-30T00:00:00.000\",\"this_year\":\"104\",\"last_year\":\"29\",\"delta\":\"75\",\"perc_diff\":\"258.6206896551724138\"}]",
    "raw_response": {
      "status": "success",
      "queryURL": "https://data.sfgov.org/resource/j67f-aayr.json?%24query=SELECT+date_trunc_ym%28date_issued%29+as+date%2C+SUM%28number_of_units_certified%29+as+value+WHERE+date_issued+%3E%3D+%272024-01-01%27+AND+date_issued+%3C+%272025-01-30%27+GROUP+BY+date+ORDER+BY+date+LIMIT+5000+OFFSET+0"
    }
  },
  "metric_result": {
    "query": "SELECT '\ud83c\udfd7\ufe0f\ud83c\udfe0 New Housing Units' as label, max(date_issued) as max_date, SUM(CASE WHEN date_issued >= '2025-01-01' AND date_issued < '2025-01-30' THEN number_of_units_certified END) as this_year, SUM(CASE WHEN date_issued >= '2024-01-01' AND date_issued < '2024-01-30' THEN number_of_units_certified END) as last_year, (SUM(CASE WHEN date_issued >= '2025-01-01' AND date_issued < '2025-01-30' THEN number_of_units_certified END) - SUM(CASE WHEN date_issued >= '2024-01-01' AND date_issued < '2024-01-30' THEN number_of_units_certified END)) as delta, ((SUM(CASE WHEN date_issued >= '2025-01-01' AND date_issued < '2025-01-30' THEN number_of_units_certified END) - SUM(CASE WHEN date_issued >= '2024-01-01' AND date_issued < '2024-01-30' THEN number_of_units_certified END)) * 100.0 / NULLIF(SUM(CASE WHEN date_issued >= '2024-01-01' AND date_issued < '2024-01-30' THEN number_of_units_certified END), 0)) as perc_diff",
    "error": null,
    "url": "https://data.sfgov.org/resource/j67f-aayr.json?%24query=SELECT+%27%F0%9F%8F%97%EF%B8%8F%F0%9F%8F%A0+New+Housing+Units%27+as+label%2C+max%28date_issued%29+as+max_date%2C+SUM%28CASE+WHEN+date_issued+%3E%3D+%272025-01-01%27+AND+date_issued+%3C+%272025-01-30%27+THEN+number_of_units_certified+END%29+as+this_year%2C+SUM%28CASE+WHEN+date_issued+%3E%3D+%272024-01-01%27+AND+date_issued+%3C+%272024-01-30%27+THEN+number_of_units_certified+END%29+as+last_year%2C+%28SUM%28CASE+WHEN+date_issued+%3E%3D+%272025-01-01%27+AND+date_issued+%3C+%272025-01-30%27+THEN+number_of_units_certified+END%29+-+SUM%28CASE+WHEN+date_issued+%3E%3D+%272024-01-01%27+AND+date_issued+%3C+%272024-01-30%27+THEN+number_of_units_certified+END%29%29+as+delta%2C+%28%28SUM%28CASE+WHEN+date_issued+%3E%3D+%272025-01-01%27+AND+date_issued+%3C+%272025-01-30%27+THEN+number_of_units_certified+END%29+-+SUM%28CASE+WHEN+date_issued+%3E%3D+%272024-01-01%27+AND+date_issued+%3C+%272024-01-30%27+THEN+number_of_units_certified+END%29%29+%2A+100.0+%2F+NULLIF%28SUM%28CASE+WHEN+date_issued+%3E%3D+%272024-01-01%27+AND+date_issued+%3C+%272024-01-30%27+THEN+number_of_units_certified+END%29%2C+0%29%29+as+perc_diff+LIMIT+5000+OFFSET+0",
    "data": "[{\"label\":\"\\ud83c\\udfd7\\ufe0f\\ud83c\\udfe0 New Housing Units\",\"max_date\":\"2025-01-30T00:00:00.000\",\"this_year\":\"104\",\"last_year\":\"29\",\"delta\":\"75\",\"perc_diff\":\"258.6206896551724138\"}]",
    "raw_response": {
      "status": "success",
      "queryURL": "https://data.sfgov.org/resource/j67f-aayr.json?%24query=SELECT+%27%F0%9F%8F%97%EF%B8%8F%F0%9F%8F%A0+New+Housing+Units%27+as+label%2C+max%28date_issued%29+as+max_date%2C+SUM%28CASE+WHEN+date_issued+%3E%3D+%272025-01-01%27+AND+date_issued+%3C+%272025-01-30%27+THEN+number_of_units_certified+END%29+as+this_year%2C+SUM%28CASE+WHEN+date_issued+%3E%3D+%272024-01-01%27+AND+date_issued+%3C+%272024-01-30%27+THEN+number_of_units_certified+END%29+as+last_year%2C+%28SUM%28CASE+WHEN+date_issued+%3E%3D+%272025-01-01%27+AND+date_issued+%3C+%272025-01-30%27+THEN+number_of_units_certified+END%29+-+SUM%28CASE+WHEN+date_issued+%3E%3D+%272024-01-01%27+AND+date_issued+%3C+%272024-01-30%27+THEN+number_of_units_certified+END%29%29+as+delta%2C+%28%28SUM%28CASE+WHEN+date_issued+%3E%3D+%272025-01-01%27+AND+date_issued+%3C+%272025-01-30%27+THEN+number_of_units_certified+END%29+-+SUM%28CASE+WHEN+date_issued+%3E%3D+%272024-01-01%27+AND+date_issued+%3C+%272024-01-30%27+THEN+number_of_units_certified+END%29%29+%2A+100.0+%2F+NULLIF%28SUM%28CASE+WHEN+date_issued+%3E%3D+%272024-01-01%27+AND+date_issued+%3C+%272024-01-30%27+THEN+number_of_units_certified+END%29%2C+0%29%29+as+perc_diff+LIMIT+5000+OFFSET+0"
    }
  },
  "generated_at": "2025-02-17T19:15:40.743337"
}